import{c as A,r as l,j as e,ar as v,ac as w}from"./index-a21bb311.js";import{B as b}from"./bot-c3ebcc05.js";import{U as k}from"./user-f0d27580.js";/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=A("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=A("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),M=({className:x="w-5 h-5"})=>e.jsx("div",{className:`${x} flex items-center justify-center text-blue-500`,children:e.jsx("span",{className:"text-xs font-bold",children:"üë£"})}),S=["–¢–µ–æ–ª–æ–≥-–¥–æ–≥–º–∞—Ç–∏—Å—Ç","–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –ø—Å–∏—Ö–æ–ª–æ–≥-–∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç","–ö—Ä–∏—Ç–∏–∫-—Å–µ–∫—É–ª—è—Ä–∏—Å—Ç"],O=["–¢–µ–æ–ª–æ–≥-–¥–æ–≥–º–∞—Ç–∏—Å—Ç","–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –ø—Å–∏—Ö–æ–ª–æ–≥-–∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç","–ö—Ä–∏—Ç–∏–∫-—Å–µ–∫—É–ª—è—Ä–∏—Å—Ç","–§–∏–ª–æ—Å–æ—Ñ","–ë–æ–≥–æ—Å–ª–æ–≤"],P=["–¢–µ–æ–ª–æ–≥-–¥–æ–≥–º–∞—Ç–∏—Å—Ç","–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –ø—Å–∏—Ö–æ–ª–æ–≥-–∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç","–ö—Ä–∏—Ç–∏–∫-—Å–µ–∫—É–ª—è—Ä–∏—Å—Ç","–§–∏–ª–æ—Å–æ—Ñ","–ë–æ–≥–æ—Å–ª–æ–≤","–ò—Å—Ç–æ—Ä–∏–∫","–ü–∞—Å—Ç–æ—Ä","–ü—Ä–∏—Ö–æ–∂–∞–Ω–∏–Ω"],_=({className:x=""})=>{const[i,T]=l.useState(""),[m,I]=l.useState("quick"),[r,o]=l.useState(S),[d,f]=l.useState(!1),[j,t]=l.useState(null),[u,L]=l.useState(null),[h,C]=l.useState([]),[R,y]=l.useState(!1),N=l.useRef(null),z=()=>{var s;(s=N.current)==null||s.scrollIntoView({behavior:"smooth"})};l.useEffect(()=>{z()},[h]);const p=(s,n,a,c,g)=>{const D={id:Date.now().toString(),type:s,content:n,timestamp:new Date,role:a,feedback:c,improvements:g};C(U=>[...U,D])},F=s=>{switch(I(s),t(null),s){case"quick":o(S);break;case"deep":o(O);break;case"custom":o([]);break}},$=s=>{o(n=>n.includes(s)?n.filter(a=>a!==s):[...n,s])},q=async()=>{if(!i.trim()){t("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –ø—Ä–æ–ø–æ–≤–µ–¥–∏");return}if(r.length===0){t("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ —Ö–æ—Ç—è –±—ã –æ–¥–Ω—É —Ä–æ–ª—å –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞");return}f(!0),t(null),y(!0),p("ai",`ü§ñ –ö–æ–Ω—Å–∏–ª–∏—É–º –Ω–∞—á–∞–ª —Ä–∞–±–æ—Ç—É. –ü–æ–ª—É—á–µ–Ω —Ç–µ–∫—Å—Ç –ø—Ä–æ–ø–æ–≤–µ–¥–∏. –ù–∞—á–∏–Ω–∞—é –∞–Ω–∞–ª–∏–∑ —Å —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö —Ä–æ–ª–µ–π: ${r.join(", ")}.`,"–ú–∏—Ö–∞–∏–ª –í–ª–∞–¥–∏–º–∏—Ä–æ–≤–∏—á");try{if(!w)throw new Error("Supabase client not initialized");console.log("Attempting to call improve-sermon function...");const{data:s,error:n}=await w.functions.invoke("improve-sermon",{body:{sermonText:i.trim(),roles:r}});if(n)throw new Error(n.message||"–û—à–∏–±–∫–∞ –ø—Ä–∏ –≤—ã–∑–æ–≤–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∞–Ω–∞–ª–∏–∑–∞");if(s&&typeof s=="object"&&"analysis"in s){const a=s;L(a.usage),a.analysis.forEach((c,g)=>{setTimeout(()=>{p("ai","üìù –ê–Ω–∞–ª–∏–∑ –∑–∞–≤–µ—Ä—à–µ–Ω",c.role,c.feedback,c.improvements)},(g+1)*2e3)})}else if(Array.isArray(s))s.forEach((a,c)=>{setTimeout(()=>{p("ai","üìù –ê–Ω–∞–ª–∏–∑ –∑–∞–≤–µ—Ä—à–µ–Ω",a.role,a.feedback,a.improvements)},(c+1)*2e3)});else throw new Error("–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞")}catch(s){console.error("Analysis error:",s),s instanceof Error?s.message.includes("Failed to send a request to the Edge Function")?t("–§—É–Ω–∫—Ü–∏—è –∞–Ω–∞–ª–∏–∑–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É –∏–ª–∏ –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É."):s.message.includes("–ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç")?t(s.message):s.message.includes("Google AI API")?t("–û—à–∏–±–∫–∞ AI —Å–µ—Ä–≤–∏—Å–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ."):t(s.message):t("–ü—Ä–æ–∏–∑–æ—à–ª–∞ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞")}finally{f(!1),y(!1)}};return e.jsxs("div",{className:`flex h-full max-h-[800px] bg-white rounded-lg shadow-lg overflow-hidden ${x}`,children:[e.jsxs("div",{className:"w-1/2 border-r border-gray-200 flex flex-col",children:[e.jsx("div",{className:"p-4 bg-gray-50 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(v,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 pt-sans-bold",children:"–í–≤–æ–¥ –ø—Ä–æ–ø–æ–≤–µ–¥–∏"}),e.jsx("p",{className:"text-sm text-gray-500 pt-sans-regular",children:"–ü–æ–¥–≥–æ—Ç–æ–≤—å—Ç–µ —Ç–µ–∫—Å—Ç –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞"})]})]})}),e.jsxs("div",{className:"flex-1 p-4 space-y-4 overflow-y-auto",children:[e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(E,{className:"w-4 h-4 text-amber-600 mt-0.5 flex-shrink-0"}),e.jsx("div",{children:e.jsxs("p",{className:"text-xs text-amber-700 pt-sans-regular",children:[e.jsx("span",{className:"pt-sans-bold",children:"–í–∞–∂–Ω–æ:"})," –ó–∞–≥—Ä—É–∂–∞–π—Ç–µ —Ç–µ–∫—Å—Ç, –∫–æ–≥–¥–∞ –æ–Ω –≥–æ—Ç–æ–≤. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ: ",e.jsx("span",{className:"pt-sans-bold",children:"3 –∞–Ω–∞–ª–∏–∑–∞ –≤ –º–µ—Å—è—Ü"}),"."]})})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"sermon-text",className:"block text-sm font-medium text-gray-700 pt-sans-bold",children:"–¢–µ–∫—Å—Ç –ø—Ä–æ–ø–æ–≤–µ–¥–∏"}),e.jsx("textarea",{id:"sermon-text",value:i,onChange:s=>T(s.target.value),placeholder:"–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –ø—Ä–æ–ø–æ–≤–µ–¥–∏ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞...",className:"w-full h-40 px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none text-black placeholder-gray-500 pt-sans-regular",disabled:d}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("span",{className:"pt-sans-regular",children:[i.length," —Å–∏–º–≤–æ–ª–æ–≤"]}),u&&e.jsxs("span",{className:"pt-sans-regular",children:["–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ: ",u.current,"/",u.limit]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 pt-sans-bold",children:"–¢–∏–ø –∞–Ω–∞–ª–∏–∑–∞"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:[{value:"quick",label:"–ë—ã—Å—Ç—Ä—ã–π",description:"3 —Ä–æ–ª–∏"},{value:"deep",label:"–ì–ª—É–±–æ–∫–∏–π",description:"5 —Ä–æ–ª–µ–π"},{value:"custom",label:"–°–≤–æ–π",description:"–í—ã–±–æ—Ä"}].map(s=>e.jsxs("label",{className:"flex flex-col items-center p-3 border border-gray-200 rounded-xl cursor-pointer hover:bg-gray-50 transition-colors",children:[e.jsx("input",{type:"radio",name:"analysis-type",value:s.value,checked:m===s.value,onChange:()=>F(s.value),className:"sr-only",disabled:d}),e.jsx("span",{className:`text-sm font-medium pt-sans-bold ${m===s.value?"text-blue-600":"text-gray-700"}`,children:s.label}),e.jsx("span",{className:"text-xs text-gray-500 pt-sans-regular",children:s.description})]},s.value))})]}),m==="custom"&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 pt-sans-bold",children:"–í—ã–±–µ—Ä–∏—Ç–µ —Ä–æ–ª–∏"}),e.jsx("div",{className:"grid grid-cols-1 gap-2",children:P.map(s=>e.jsxs("label",{className:"flex items-center space-x-2 p-2 border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50",children:[e.jsx("input",{type:"checkbox",checked:r.includes(s),onChange:()=>$(s),className:"w-4 h-4 text-blue-600 focus:ring-blue-500 rounded",disabled:d}),e.jsx("span",{className:"text-sm text-gray-700 pt-sans-regular",children:s})]},s))})]}),r.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("span",{className:"text-sm font-medium text-gray-700 pt-sans-bold",children:["–í—ã–±—Ä–∞–Ω–Ω—ã–µ —Ä–æ–ª–∏ (",r.length,")"]})}),e.jsx("div",{className:"flex flex-wrap gap-2",children:r.map(s=>e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 pt-sans-regular",children:s},s))})]}),e.jsx("div",{className:"pt-4",children:e.jsx("button",{onClick:q,disabled:d||!i.trim()||r.length===0,className:"w-full flex items-center justify-center gap-2 px-6 py-3 bg-blue-500 text-white rounded-xl hover:bg-blue-600 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium pt-sans-bold",children:d?e.jsxs(e.Fragment,{children:[e.jsx(B,{className:"w-4 h-4 animate-spin"}),e.jsx("span",{className:"pt-sans-regular",children:"–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(v,{className:"w-4 h-4"}),e.jsx("span",{className:"pt-sans-bold",children:"–ù–∞—á–∞—Ç—å –∞–Ω–∞–ª–∏–∑"})]})})})]})]}),e.jsxs("div",{className:"w-1/2 flex flex-col",children:[e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-gradient-to-r from-blue-500 to-blue-600 text-white",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-full",children:e.jsx(b,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold pt-sans-bold",children:"–ö–æ–Ω—Å–∏–ª–∏—É–º —ç–∫—Å–ø–µ—Ä—Ç–æ–≤"}),e.jsx("p",{className:"text-sm text-blue-100 pt-sans-regular",children:"AI-–∞–Ω–∞–ª–∏–∑ –ø—Ä–æ–ø–æ–≤–µ–¥–µ–π"})]}),e.jsx("div",{className:"ml-auto",children:e.jsx("div",{className:"w-3 h-3 bg-green-400 rounded-full"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto bg-gray-50 p-4 space-y-4",children:[h.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500",children:[e.jsx(b,{className:"w-12 h-12 mb-4 text-gray-300"}),e.jsx("p",{className:"text-lg font-medium pt-sans-bold",children:"–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!"}),e.jsx("p",{className:"text-sm text-center max-w-sm pt-sans-regular",children:'–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –ø—Ä–æ–ø–æ–≤–µ–¥–∏ —Å–ª–µ–≤–∞ –∏ –Ω–∞–∂–º–∏—Ç–µ "–ù–∞—á–∞—Ç—å –∞–Ω–∞–ª–∏–∑". –ö–æ–Ω—Å–∏–ª–∏—É–º —ç–∫—Å–ø–µ—Ä—Ç–æ–≤ –ø–æ–º–æ–∂–µ—Ç —É–ª—É—á—à–∏—Ç—å –≤–∞—à—É –ø—Ä–æ–ø–æ–≤–µ–¥—å.'})]}):h.map(s=>e.jsxs("div",{className:`flex gap-3 ${s.type==="user"?"justify-end":"justify-start"}`,children:[s.type==="ai"&&e.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full overflow-hidden",children:s.role==="–ú–∏—Ö–∞–∏–ª –í–ª–∞–¥–∏–º–∏—Ä–æ–≤–∏—á"?e.jsx("img",{src:"/fonts/mikhail-avatar.webp",alt:"–ú–∏—Ö–∞–∏–ª –í–ª–∞–¥–∏–º–∏—Ä–æ–≤–∏—á",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:e.jsx(b,{className:"w-4 h-4 text-white"})})}),e.jsxs("div",{className:`max-w-[85%] rounded-2xl px-4 py-3 ${s.type==="user"?"bg-blue-500 text-white rounded-br-md":"bg-white text-gray-800 rounded-bl-md shadow-sm border"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.type==="user"?e.jsx(k,{className:"w-4 h-4"}):e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-xs font-medium text-blue-600 pt-sans-bold",children:s.role}),s.role==="–ú–∏—Ö–∞–∏–ª –í–ª–∞–¥–∏–º–∏—Ä–æ–≤–∏—á"&&e.jsx(M,{className:"w-5 h-5 text-blue-500 ml-1"})]}),e.jsx("span",{className:"text-xs opacity-70 pt-sans-regular",children:s.timestamp.toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"})})]}),e.jsx("p",{className:"text-sm whitespace-pre-wrap pt-sans-regular",children:s.content}),s.feedback&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 mb-1 pt-sans-bold",children:"–§–∏–¥–±—ç–∫:"}),e.jsx("p",{className:"text-sm text-gray-700 pt-sans-regular",children:s.feedback})]}),s.improvements&&e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 mb-1 pt-sans-bold",children:"–£–ª—É—á—à–µ–Ω–∏—è:"}),e.jsx("p",{className:"text-sm text-gray-700 pt-sans-regular",children:s.improvements})]})]}),s.type==="user"&&e.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center",children:e.jsx(k,{className:"w-4 h-4 text-gray-600"})})]},s.id)),R&&e.jsxs("div",{className:"flex gap-3 justify-start",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full overflow-hidden",children:e.jsx("img",{src:"/fonts/mikhail-avatar.webp",alt:"–ú–∏—Ö–∞–∏–ª –í–ª–∞–¥–∏–º–∏—Ä–æ–≤–∏—á",className:"w-full h-full object-cover"})}),e.jsx("div",{className:"bg-white rounded-2xl rounded-bl-md px-4 py-3 shadow-sm border",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-gray-500 pt-sans-regular",children:"–ö–æ–Ω—Å–∏–ª–∏—É–º –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç..."}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})]})})]}),e.jsx("div",{ref:N})]}),j&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 mx-4 mb-4",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(E,{className:"w-4 h-4 text-red-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-red-800 pt-sans-bold",children:"–û—à–∏–±–∫–∞"}),e.jsx("p",{className:"text-sm text-red-700 mt-1 pt-sans-regular",children:j})]})]})})]})]})};function V(){return e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2 pt-sans-bold",children:"–£–ª—É—á—à–∏—Ç—å –ø—Ä–æ–ø–æ–≤–µ–¥—å"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 pt-sans-regular",children:"–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ AI –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –≤–∞—à–∏—Ö –ø—Ä–æ–ø–æ–≤–µ–¥–µ–π —Å —Ä–∞–∑–Ω—ã—Ö —Ç–æ—á–µ–∫ –∑—Ä–µ–Ω–∏—è"})]}),e.jsx(_,{})]})})}export{V as default};

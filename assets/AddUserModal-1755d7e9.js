import{c as p,r as o,j as e,X as y,C as b,z as m}from"./index-a21bb311.js";import{U as j}from"./user-f0d27580.js";import{M as v}from"./mail-9763a4f0.js";/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N=p("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k=p("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);function C({isOpen:c,onClose:i,onAddUser:x,mode:r="add",initialUser:s=null,onSaveEdit:u}){const[t,l]=o.useState({full_name:"",email:"",phone:"",date_of_birth:"",status:"guest",tags:""}),[h,g]=o.useState(!1),f=async a=>{a.preventDefault(),g(!0);try{if(await new Promise(n=>setTimeout(n,1e3)),r==="edit"&&s){const n={...s,...t,tags:t.tags.split(",").map(d=>d.trim()).filter(Boolean),updated_at:new Date().toISOString()};u&&u(n),m.success("Изменения сохранены")}else{const n={id:Date.now().toString(),...t,tags:t.tags.split(",").map(d=>d.trim()).filter(Boolean),created_at:new Date().toISOString(),updated_at:new Date().toISOString()};x&&x(n),m.success("Пользователь успешно добавлен!")}i(),l({full_name:"",email:"",phone:"",date_of_birth:"",status:"guest",tags:""})}catch{m.error("Ошибка при добавлении пользователя")}finally{g(!1)}};return o.useEffect(()=>{c&&r==="edit"&&s&&l({full_name:s.full_name||"",email:s.email||"",phone:s.phone||"",date_of_birth:s.date_of_birth||"",status:s.status||"guest",tags:Array.isArray(s.tags)?s.tags.join(", "):s.tags||""})},[c,r,s]),c?e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex min-h-screen items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75",onClick:i}),e.jsxs("div",{className:"relative bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:r==="edit"?"Редактировать пользователя":"Добавить пользователя"}),e.jsx("button",{onClick:i,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",children:e.jsx(y,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:f,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Полное имя *"}),e.jsxs("div",{className:"relative",children:[e.jsx(j,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",required:!0,value:t.full_name,onChange:a=>l({...t,full_name:a.target.value}),className:"input pl-10",placeholder:"Введите полное имя"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email *"}),e.jsxs("div",{className:"relative",children:[e.jsx(v,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"email",required:!0,value:t.email,onChange:a=>l({...t,email:a.target.value}),className:"input pl-10",placeholder:"Введите email"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Телефон"}),e.jsxs("div",{className:"relative",children:[e.jsx(N,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"tel",value:t.phone,onChange:a=>l({...t,phone:a.target.value}),className:"input pl-10",placeholder:"Введите номер телефона"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Дата рождения"}),e.jsxs("div",{className:"relative",children:[e.jsx(b,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"date",value:t.date_of_birth,onChange:a=>l({...t,date_of_birth:a.target.value}),className:"input pl-10"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Статус"}),e.jsxs("select",{value:t.status,onChange:a=>l({...t,status:a.target.value}),className:"input",children:[e.jsx("option",{value:"guest",children:"Гость"}),e.jsx("option",{value:"new_member",children:"Новый участник"}),e.jsx("option",{value:"active_member",children:"Активный участник"}),e.jsx("option",{value:"minister",children:"Служитель"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Теги (через запятую)"}),e.jsxs("div",{className:"relative",children:[e.jsx(k,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",value:t.tags,onChange:a=>l({...t,tags:a.target.value}),className:"input pl-10",placeholder:"Молодежное служение, Музыка"})]})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:i,className:"btn btn-secondary flex-1",children:"Отмена"}),e.jsx("button",{type:"submit",disabled:h,className:"btn btn-primary flex-1",children:h?r==="edit"?"Сохранение...":"Добавление...":r==="edit"?"Сохранить":"Добавить"})]})]})]})]})}):null}export{C as A,N as P};

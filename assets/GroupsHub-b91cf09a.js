import{c as C,r as c,j as e,X as M,U as N,a as $,C as A,B as T,z as w}from"./index-a21bb311.js";import{S as L}from"./search-8654424b.js";import{P as D}from"./plus-4344ddf8.js";import{T as O}from"./trash-2-369484e7.js";/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=C("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=C("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=C("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),_=["Алексей Козлов","Мария Сидорова","Елена Петрова","Дмитрий Волков","Анна Морозова"],I=["Воскресенье, 09:00","Воскресенье, 11:00","Воскресенье, 19:00","Суббота, 16:00","Суббота, 18:00","Пятница, 19:00","Среда, 19:00"],R=["Главный зал","Малый зал","Зал молодежи","Детский зал","Конференц-зал","Библиотека"];function P({isOpen:h,onClose:v,onSave:u}){const[l,o]=c.useState({name:"",description:"",leader:"",schedule:"",location:"",maxMembers:20}),[r,g]=c.useState({}),i=(s,y)=>{o(j=>({...j,[s]:y})),r[s]&&g(j=>({...j,[s]:void 0}))},b=()=>{const s={};return l.name.trim()||(s.name="Название группы обязательно"),l.description.trim()||(s.description="Описание группы обязательно"),l.leader||(s.leader="Выберите лидера группы"),l.schedule||(s.schedule="Выберите расписание"),l.location||(s.location="Выберите место проведения"),(l.maxMembers<1||l.maxMembers>100||Number.isNaN(l.maxMembers))&&(s.maxMembers="Количество участников должно быть от 1 до 100"),g(s),Object.keys(s).length===0},x=s=>{s.preventDefault(),b()&&(u(l),o({name:"",description:"",leader:"",schedule:"",location:"",maxMembers:20}),g({}),v())},m=()=>{o({name:"",description:"",leader:"",schedule:"",location:"",maxMembers:20}),g({}),v()};return h?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:"Создать новую группу"}),e.jsx("button",{onClick:m,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:e.jsx(M,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:x,className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Название группы *"}),e.jsx("input",{type:"text",value:l.name,onChange:s=>i("name",s.target.value),className:`input w-full ${r.name?"border-red-500":""}`,placeholder:"Например: Молодежное служение"}),r.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Описание группы *"}),e.jsx("textarea",{value:l.description,onChange:s=>i("description",s.target.value),className:`input w-full h-24 resize-none ${r.description?"border-red-500":""}`,placeholder:"Опишите цель и особенности группы..."}),r.description&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.description})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Лидер группы *"}),e.jsxs("select",{value:l.leader,onChange:s=>i("leader",s.target.value),className:`input w-full ${r.leader?"border-red-500":""}`,children:[e.jsx("option",{value:"",children:"Выберите лидера"}),_.map(s=>e.jsx("option",{value:s,children:s},s))]}),r.leader&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.leader})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Расписание *"}),e.jsxs("select",{value:l.schedule,onChange:s=>i("schedule",s.target.value),className:`input w-full ${r.schedule?"border-red-500":""}`,children:[e.jsx("option",{value:"",children:"Выберите расписание"}),I.map(s=>e.jsx("option",{value:s,children:s},s))]}),r.schedule&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.schedule})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Место проведения *"}),e.jsxs("select",{value:l.location,onChange:s=>i("location",s.target.value),className:`input w-full ${r.location?"border-red-500":""}`,children:[e.jsx("option",{value:"",children:"Выберите место проведения"}),R.map(s=>e.jsx("option",{value:s,children:s},s))]}),r.location&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.location})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Максимальное количество участников *"}),e.jsx("input",{type:"number",value:l.maxMembers,onChange:s=>{const y=parseInt(s.target.value,10);i("maxMembers",Number.isNaN(y)?0:y)},className:`input w-full ${r.maxMembers?"border-red-500":""}`,placeholder:"Например: 20"}),r.maxMembers&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.maxMembers})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:m,className:"px-4 py-2 text-gray-700 dark:text-gray-300 bg-gray-200 dark:bg-gray-700 rounded-md hover:bg-gray-300 dark:hover:bg-gray-600",children:"Отмена"}),e.jsx("button",{type:"submit",className:"px-4 py-2 text-white bg-blue-600 rounded-md hover:bg-blue-700",children:"Создать группу"})]})]})]})}):null}const q=[{id:"1",name:"Алексей Козлов",email:"alexey@example.com",phone:"+7 (999) 123-45-67",status:"active",joinDate:"2024-01-15",role:"leader"},{id:"2",name:"Мария Сидорова",email:"maria@example.com",phone:"+7 (999) 234-56-78",status:"active",joinDate:"2024-02-20",role:"assistant"},{id:"3",name:"Дмитрий Волков",email:"dmitry@example.com",phone:"+7 (999) 345-67-89",status:"active",joinDate:"2024-03-10",role:"member"},{id:"4",name:"Анна Морозова",email:"anna@example.com",phone:"+7 (999) 456-78-90",status:"active",joinDate:"2024-03-25",role:"member"},{id:"5",name:"Елена Петрова",email:"elena@example.com",phone:"+7 (999) 567-89-01",status:"inactive",joinDate:"2024-01-30",role:"member"}],S=[{id:"6",name:"Игорь Смирнов",email:"igor@example.com",phone:"+7 (999) 678-90-12"},{id:"7",name:"Ольга Кузнецова",email:"olga@example.com",phone:"+7 (999) 789-01-23"},{id:"8",name:"Сергей Попов",email:"sergey@example.com",phone:"+7 (999) 890-12-34"}];function F({isOpen:h,onClose:v,group:u}){const[l,o]=c.useState(q),[r,g]=c.useState(""),[i,b]=c.useState(!1),[x,m]=c.useState([]),s=l.filter(a=>a.name.toLowerCase().includes(r.toLowerCase())||a.email.toLowerCase().includes(r.toLowerCase())),y=S.filter(a=>!l.some(n=>n.id===a.id)&&(a.name.toLowerCase().includes(r.toLowerCase())||a.email.toLowerCase().includes(r.toLowerCase()))),j=a=>{o(n=>n.filter(p=>p.id!==a))},k=a=>{o(n=>n.map(p=>p.id===a?{...p,status:p.status==="active"?"inactive":"active"}:p))},t=a=>{m(n=>n.includes(a)?n.filter(p=>p!==a):[...n,a])},f=()=>{const a=S.filter(n=>x.includes(n.id)).map(n=>({...n,status:"active",joinDate:new Date().toISOString().split("T")[0],role:"member"}));o(n=>[...n,...a]),m([]),b(!1)},d=a=>{switch(a){case"leader":return"Лидер";case"assistant":return"Помощник";case"member":return"Участник";default:return"Участник"}},G=a=>{switch(a){case"leader":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"assistant":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"member":return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200"}};return h?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:['Участники группы "',u.name,'"']}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:[l.length," из ",u.maxMembers||"∞"," участников"]})]}),e.jsx("button",{onClick:v,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:e.jsx(M,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(L,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Поиск участников...",value:r,onChange:a=>g(a.target.value),className:"input pl-10 w-full"})]}),e.jsxs("button",{onClick:()=>b(!i),className:"btn btn-primary",children:[e.jsx(D,{className:"mr-2 h-4 w-4"}),"Добавить участников"]})]}),i&&e.jsxs("div",{className:"mb-6 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-4",children:"Доступные участники"}),e.jsx("div",{className:"space-y-2",children:y.map(a=>e.jsx("div",{className:"flex items-center justify-between p-3 bg-white dark:bg-gray-800 rounded border",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:x.includes(a.id),onChange:()=>t(a.id),className:"mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:a.name}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[a.email," • ",a.phone]})]})]})},a.id))}),x.length>0&&e.jsxs("div",{className:"mt-4 flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>{m([]),b(!1)},className:"btn btn-secondary",children:"Отмена"}),e.jsxs("button",{onClick:f,className:"btn btn-primary",children:["Добавить выбранных (",x.length,")"]})]})]}),e.jsx("div",{className:"space-y-3",children:s.map(a=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-10 h-10 bg-primary-100 dark:bg-primary-900 rounded-full flex items-center justify-center",children:e.jsx(N,{className:"h-5 w-5 text-primary-600"})})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:a.name}),e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${G(a.role)}`,children:d(a.role)}),e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${a.status==="active"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200"}`,children:a.status==="active"?"Активен":"Неактивен"})]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[a.email," • ",a.phone]}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:["Присоединился: ",new Date(a.joinDate).toLocaleDateString("ru-RU")]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>k(a.id),className:`p-2 rounded-lg ${a.status==="active"?"text-yellow-600 hover:bg-yellow-50 dark:hover:bg-yellow-900/20":"text-green-600 hover:bg-green-50 dark:hover:bg-green-900/20"}`,title:a.status==="active"?"Деактивировать":"Активировать",children:a.status==="active"?e.jsx(U,{className:"h-4 w-4"}):e.jsx($,{className:"h-4 w-4"})}),a.role!=="leader"&&e.jsx("button",{onClick:()=>j(a.id),className:"p-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg",title:"Удалить из группы",children:e.jsx(M,{className:"h-4 w-4"})})]})]},a.id))}),s.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(N,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-gray-100",children:"Участники не найдены"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Попробуйте изменить параметры поиска"})]})]})]})}):null}const B=[{id:"1",name:"Молодежное служение",description:"Группа для молодых людей 18-30 лет",leader:"Алексей Козлов",members_count:15,maxMembers:25,schedule:"Воскресенье, 19:00",location:"Зал молодежи",status:"active",createdAt:"2024-01-15"},{id:"2",name:"Семейное служение",description:"Группа для семей с детьми",leader:"Мария Сидорова",members_count:8,maxMembers:15,schedule:"Суббота, 16:00",location:"Малый зал",status:"active",createdAt:"2024-02-20"},{id:"3",name:"Детское служение",description:"Группа для детей 5-12 лет",leader:"Елена Петрова",members_count:22,maxMembers:30,schedule:"Воскресенье, 11:00",location:"Детский зал",status:"active",createdAt:"2024-03-10"}];function Z(){const[h,v]=c.useState(""),[u,l]=c.useState(B),[o,r]=c.useState(!1),[g,i]=c.useState(!1),[b,x]=c.useState(null);c.useEffect(()=>{const t=localStorage.getItem("church-groups");t&&l(JSON.parse(t))},[]),c.useEffect(()=>{localStorage.setItem("church-groups",JSON.stringify(u))},[u]);const m=u.filter(t=>t.name.toLowerCase().includes(h.toLowerCase())||t.description.toLowerCase().includes(h.toLowerCase())||t.leader.toLowerCase().includes(h.toLowerCase())),s=t=>{const f={id:Date.now().toString(),...t,members_count:0,status:"active",createdAt:new Date().toISOString().split("T")[0]};l(d=>[...d,f]),w.success("Группа успешно создана!")},y=t=>{window.confirm("Вы уверены, что хотите удалить эту группу?")&&(l(f=>f.filter(d=>d.id!==t)),w.success("Группа удалена!"))},j=t=>{l(f=>f.map(d=>d.id===t?{...d,status:d.status==="active"?"inactive":"active"}:d)),w.success("Статус группы изменен!")},k=t=>{x(t),i(!0)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:"Группы и служения"}),e.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"Управление малыми группами и служениями"})]}),e.jsxs("button",{onClick:()=>r(!0),className:"btn btn-primary",children:[e.jsx(D,{className:"mr-2 h-4 w-4"}),"Создать группу"]})]}),e.jsx("div",{className:"card p-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(L,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Поиск групп...",value:h,onChange:t=>v(t.target.value),className:"input pl-10"})]})}),e.jsx("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:m.map(t=>e.jsxs("div",{className:"card p-6 hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:t.name}),e.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:t.description})]}),e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${t.status==="active"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200"}`,children:t.status==="active"?"Активна":"Неактивна"})]}),e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(N,{className:"mr-2 h-4 w-4"}),e.jsxs("span",{children:["Лидер: ",t.leader]})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(N,{className:"mr-2 h-4 w-4"}),e.jsxs("span",{children:["Участников: ",t.members_count,"/",t.maxMembers]}),e.jsx("div",{className:"ml-2 flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-primary-600 h-2 rounded-full",style:{width:`${t.members_count/t.maxMembers*100}%`}})})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(A,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:t.schedule})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(z,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:t.location})]})]}),e.jsxs("div",{className:"mt-6 flex space-x-2",children:[e.jsxs("button",{onClick:()=>k(t),className:"btn btn-primary flex-1",children:[e.jsx(E,{className:"mr-1 h-4 w-4"}),"Управление"]}),e.jsx("button",{className:"btn btn-secondary",children:e.jsx(T,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>j(t.id),className:`btn ${t.status==="active"?"btn-warning":"btn-success"}`,children:t.status==="active"?"Деактивировать":"Активировать"}),e.jsx("button",{onClick:()=>y(t.id),className:"btn btn-danger",children:e.jsx(O,{className:"h-4 w-4"})})]})]},t.id))}),m.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(N,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-gray-100",children:"Группы не найдены"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Попробуйте изменить параметры поиска"})]}),e.jsx(P,{isOpen:o,onClose:()=>r(!1),onSave:s}),b&&e.jsx(F,{isOpen:g,onClose:()=>{i(!1),x(null)},group:b})]})}export{Z as default};
